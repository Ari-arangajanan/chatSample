package com.wonder.chatSample.configs;import javax.servlet.ServletContext;import javax.websocket.server.ServerEndpointConfig;import org.springframework.context.ApplicationContext;import org.springframework.web.context.support.WebApplicationContextUtils;public class SpringAwareConfigurator extends ServerEndpointConfig.Configurator {    private static volatile ApplicationContext applicationContext;    public SpringAwareConfigurator() {    }    public SpringAwareConfigurator(ApplicationContext applicationContext) {        SpringAwareConfigurator.applicationContext = applicationContext;    }    @Override    public <T> T getEndpointInstance(Class<T> clazz) throws InstantiationException {        return applicationContext.getAutowireCapableBeanFactory().createBean(clazz);    }    public static void setApplicationContext(ServletContext servletContext) {        applicationContext = WebApplicationContextUtils                .getRequiredWebApplicationContext(servletContext);    }}